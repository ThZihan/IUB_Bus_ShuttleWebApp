<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IUB Smart Shuttle - Admin Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts (Reused) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons (Reused) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Existing Styles -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <!-- Admin Dashboard Specific CSS -->
    <link rel="stylesheet" href="css/adminDashboard.css">
</head>
<body>

<div id="home" class="dashboard-container">

    <!-- Sidebar -->
    <nav id="sidebar" class="active">
        <div class="sidebar-header">
            <i class="fas fa-bus-alt fa-2x"></i>
            <span style="display: none; " id="iconText">IUB Smart Bus Shuttle</span>
        </div>
        <ul class="list-unstyled components">
            <li class="active">
                <a href="#home">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#userManagement" class="nav-link">
                    <i class="fas fa-users"></i>
                    <span>User Management</span>
                </a>
            </li>
            <li>
                <a href="#shuttleManagement" class="nav-link">
                    <i class="fas fa-bus"></i>
                    <span>Shuttle Management</span>
                </a>
            </li>
            <li>
                <a href="#driverManagement" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>Driver Management</span>
                </a>
            </li>

            <li>
                <a href="#bookingManagement" class="nav-link">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Booking Management</span>
                </a>
            </li>
            <li>
                <a href="#manageSchedules">
                    <i class="fas fa-calendar-check"></i>
                    <span>Manage Schedules</span>
                </a>
            </li>
            <li>
                <a href="#manageFeedback">
                    <i class="fas fa-comments"></i>
                    <span>Manage Feedback</span>
                </a>
            </li>

            <li>
                <a href="#reports" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
            </li>
            <li>
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div id="content">
        <!-- Topbar -->
        <nav class="navbar navbar-expand-lg navbar-fixed-top">
            <div class="container-fluid">
                <button type="button" id="sidebarCollapse" class="btn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="d-flex align-items-center ms-auto">
                    <!-- Clock -->
                    <div class="clock me-3" id="realtime-clock"></div>
                    <!-- Notifications -->
                    <div class="dropdown notifications">
                        <button class="btn position-relative" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-bell"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#">New user registered</a></li>
                            <li><a class="dropdown-item" href="#">Shuttle schedule updated</a></li>
                            <li><a class="dropdown-item" href="#">System maintenance scheduled</a></li>
                        </ul>
                    </div>
                    <!-- User Profile -->
                    <div class="dropdown ms-3">
                        <button class="btn d-flex align-items-center" type="button" data-bs-toggle="dropdown">
                            <img src="images/devimg.jpeg" class="rounded-circle me-2" alt="Profile">
                            <span>Hi, Zihan!</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a href="profile.html" class="dropdown-item">Profile</a></li>
                            <li><a class="dropdown-item" href="settings.html">Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="index.html">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <div class="hero-section">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1>Welcome to IUB Smart Shuttle Dashboard</h1>
                <p>Your shuttle schedules and bookings Assistant.</p>
            </div>
        </div>
        <!-- Dashboard Content -->
        <div class="container-fluid dashboard-content">
            <!-- Quick Stats -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-card-info">
                            <h6>Total Users</h6>
                            <h3 id="total-users">150</h3>
                        </div>
                        <div class="stat-card-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-card-info">
                            <h6>Active Shuttles</h6>
                            <h3 id="active-shuttles">8</h3>
                        </div>
                        <div class="stat-card-icon">
                            <i class="fas fa-bus"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-card-info">
                            <h6>Pending Bookings</h6>
                            <h3 id="pending-bookings">25</h3>
                        </div>
                        <div class="stat-card-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-card-info">
                            <h6>Reports Generated</h6>
                            <h3 id="reports-generated">12</h3>
                        </div>
                        <div class="stat-card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Management Section -->
            <section id="userManagement" class="mb-5">
                <h2 class="section-title">User Management</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Manage Users</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover" id="usersTable">
                            <thead>
                            <tr>
                                <th>User ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Designation</th>
                                <th>Phone Number</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Dynamic User Rows Will Be Injected Here -->
                            </tbody>
                        </table>
                        <button class="btn orangebtn" data-bs-toggle="modal" data-bs-target="#registerUserModal"><i class="fas fa-user-plus"></i> Add New User</button>
                    </div>
                </div>
            </section>

            <!-- Edit User Modal -->
            <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="mb-3">
                                    <label for="editUserIdInput" class="form-label">User ID</label>
                                    <input type="text" class="form-control" id="editUserIdInput" readonly>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserNameInput" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="editUserNameInput" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserEmailInput" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="editUserEmailInput" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserDesignationInput" class="form-label">Designation</label>
                                    <select class="form-control" id="editUserDesignationInput" required>
                                        <option value="">Select Designation</option>
                                        <option value="Admin">Admin</option>
                                        <option value="Student">Student</option>
                                        <option value="Faculty">Faculty</option>
                                        <option value="Staff">Staff</option>
                                        <option value="Moderator">Moderator</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserGenderInput" class="form-label">Gender</label>
                                    <select class="form-control" id="editUserGenderInput">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserPhoneInput" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="editUserPhoneInput" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserStatusInput" class="form-label">Status</label>
                                    <select class="form-control" id="editUserStatusInput" required>
                                        <option value="">Select Status</option>
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                        <option value="Suspended">Suspended</option>
                                        <option value="Pending">Pending</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">NFC Status</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="nfcOptionEdit" id="editNfcAssigned" value="assigned">
                                        <label class="form-check-label" for="editNfcAssigned">
                                            RFID Already Registered
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="nfcOptionEdit" id="editNfcAssign" value="assign">
                                        <label class="form-check-label" for="editNfcAssign">
                                            Register RFID
                                        </label>
                                    </div>
                                    <div class="text-center mt-3" id="editNfcGif" style="display: none;">
                                        <img src="images/place_nfc.gif" alt="Place NFC Card" class="img-fluid">
                                    </div>
                                    <div id="editNfcCodeInput" class="mt-3" style="display: none;">
                                        <label for="editUserRFIDInput" class="form-label">RFID Code</label>
                                        <input type="text" class="form-control" id="editUserRFIDInput" placeholder="Enter RFID Code">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="editUserPasswordInput" class="form-label">Password (Leave blank to keep unchanged)</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="editUserPasswordInput" placeholder="Enter new password if changing">
                                        <button class="btn btn-outline-secondary" type="button" id="toggleEditPassword">
                                            <i class="far fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Register User Modal -->
            <div id="registerUserModal" class="modal fade" tabindex="-1" aria-labelledby="registerUserModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="registerUserModalLabel">Create New User</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form class="registration-form">
                                <div class="form-group mb-3">
                                    <label for="studentId" class="form-label">User ID</label>
                                    <input type="text" class="form-control" id="studentId" placeholder="Enter User ID" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="fullName" class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="fullName" placeholder="Enter full name" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" placeholder="your.name@iub.edu.bd" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="password" class="form-label">Password</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="password" placeholder="Create a strong password" required>
                                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                            <i class="far fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="designationSelect" class="form-label">Designation</label>
                                    <select class="form-control" id="designationSelect" required>
                                        <option value="">Select Designation</option>
                                        <option value="Admin">Admin</option>
                                        <option value="Student">Student</option>
                                        <option value="Faculty">Faculty</option>
                                        <option value="Staff">Staff</option>
                                        <option value="Moderator">Moderator</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="genderSelect" class="form-label">Gender</label>
                                    <select class="form-control" id="genderSelect">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="phone" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="phone" placeholder="Enter phone number" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label class="form-label">NFC Registration Method</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="nfcOption" id="scanNFC" checked>
                                        <label class="form-check-label" for="scanNFC">
                                            Scan NFC Card
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="nfcOption" id="enterNFCCode">
                                        <label class="form-check-label" for="enterNFCCode">
                                            Enter NFC Code Manually
                                        </label>
                                    </div>
                                    <div class="text-center mt-3">
                                        <img src="images/place_nfc.gif" alt="Place NFC Card" id="nfcGif" class="img-fluid">
                                    </div>
                                    <div id="nfcCodeInput" class="mt-3" style="display: none;">
                                        <label for="nfcCode" class="form-label">NFC Code</label>
                                        <input type="text" class="form-control" id="nfcCode" placeholder="Enter NFC Code">
                                    </div>
                                </div>
                                <div class="modal__footer mt-4">
                                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                                    <button id="CreateAccountbtn" type="submit" class="btn btn-primary">Create Account</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shuttle Management Section -->
            <section id="shuttleManagement" class="mb-5">
                <h2 class="section-title">Shuttle Management</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Manage Shuttles</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Shuttle ID</th>
                                <th>Route</th>
                                <th>Capacity</th>
                                <th>Status</th>
                                <th>Driver</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>S001</td>
                                <td>IUB Campus - Airport</td>
                                <td>30</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>Mohammad Ali</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#editShuttleModal" title="Edit Shuttle">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Delete Shuttle">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>

                        </table>
                        <button class="btn orangebtn" data-bs-toggle="modal" data-bs-target="#placeNewShuttleModal"><i class="fas fa-plus"></i> Add New Shuttle</button>
                    </div>

                    <div class="modal fade" id="editShuttleModal" tabindex="-1" aria-labelledby="editShuttleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header bg-gradient-primary text-white">
                                    <h5 class="modal-title" id="editShuttleModalLabel">Edit Shuttle</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="mb-3">
                                            <label for="editShuttleIdInput" class="form-label">Shuttle ID</label>
                                            <input type="text" class="form-control" id="editShuttleIdInput" readonly>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editRouteInput" class="form-label">Route</label>
                                            <input type="text" class="form-control" id="editRouteInput" placeholder="Enter Route">
                                        </div>
                                        <div class="mb-3">
                                            <label for="editStatusInput" class="form-label">Status</label>
                                            <select class="form-control" id="editStatusInput">
                                                <option value="Active">Active</option>
                                                <option value="Inactive">Inactive</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editDriverInput" class="form-label">Driver</label>
                                            <input type="text" class="form-control" id="editDriverInput" placeholder="Enter Driver Name">
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100">Save Changes</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="placeNewShuttleModal" class="modal fade" tabindex="-1" aria-labelledby="placeNewShuttleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header bg-gradient-primary text-white">
                                    <h5 class="modal-title" id="placeNewShuttleModalLabel">Add New Shuttle</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="mb-3">
                                            <label for="shuttleIdInput" class="form-label">Shuttle ID</label>
                                            <input type="text" class="form-control" id="shuttleIdInput" placeholder="Enter Shuttle ID" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="routeInput" class="form-label">Route</label>
                                            <input type="text" class="form-control" id="routeInput" placeholder="Enter Route" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="statusInput" class="form-label">Status</label>
                                            <select class="form-control" id="statusInput" required>
                                                <option value="">Select Status</option>
                                                <option value="Active">Active</option>
                                                <option value="Inactive">Inactive</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="driverInput" class="form-label">Driver Name</label>
                                            <input type="text" class="form-control" id="driverInput" placeholder="Enter Driver Name" required>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100">Add Shuttle</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Driver Management Section -->
            <section id="driverManagement" class="mb-5">
                <h2 class="section-title">Driver Management</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Manage Drivers</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Driver ID</th>
                                <th>Name</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>D001</td>
                                <td>Mohammad Ali</td>
                                <td>+880123456789</td>
                                <td>Active</td>
                                <td>
                                    <button class="btn btn-sm btn-primary edit-driver-btn" data-bs-toggle="modal" data-bs-target="#editDriverModal" title="Edit Driver">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Delete Driver">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>D002</td>
                                <td>Remon Hawladar</td>
                                <td>+8809998922221</td>
                                <td>Active</td>
                                <td>
                                    <button class="btn btn-sm btn-primary edit-driver-btn" data-bs-toggle="modal" data-bs-target="#editDriverModal" title="Edit Driver">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Delete Driver">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>

                        </table>
                        <button class="btn orangebtn" data-bs-toggle="modal" data-bs-target="#addDriverModal">
                            <i class="fas fa-user-plus"></i> Add New Driver
                        </button>
                    </div>
                </div>
            </section>

            <!-- Add Driver Modal -->
            <div class="modal fade" id="addDriverModal" tabindex="-1" aria-labelledby="addDriverModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="addDriverModalLabel">Add New Driver</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="mb-3">
                                    <label for="driverIdInput" class="form-label">Driver ID</label>
                                    <input type="text" class="form-control" id="driverIdInput" placeholder="Enter Driver ID" required>
                                </div>
                                <div class="mb-3">
                                    <label for="driverNameInput" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="driverNameInput" placeholder="Enter Driver Name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="driverContactInput" class="form-label">Contact</label>
                                    <input type="tel" class="form-control" id="driverContactInput" placeholder="Enter Contact Number" required>
                                </div>
                                <div class="mb-3">
                                    <label for="driverStatusInput" class="form-label">Status</label>
                                    <select class="form-control" id="driverStatusInput" required>
                                        <option value="">Select Status</option>
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Add Driver</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Edit Driver Modal -->
            <div class="modal fade" id="editDriverModal" tabindex="-1" aria-labelledby="editDriverModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="editDriverModalLabel">Edit Driver</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="mb-3">
                                    <label for="editDriverIdInput" class="form-label">Driver ID</label>
                                    <input type="text" class="form-control" id="editDriverIdInput" placeholder="Enter Driver ID" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editDriverNameInput" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="editDriverNameInput" placeholder="Enter Driver Name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editDriverContactInput" class="form-label">Contact</label>
                                    <input type="tel" class="form-control" id="editDriverContactInput" placeholder="Enter Contact Number" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editDriverStatusInput" class="form-label">Status</label>
                                    <select class="form-control" id="editDriverStatusInput" required>
                                        <option value="">Select Status</option>
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Booking Management Section -->
            <section id="bookingManagement" class="mb-5">
                <h2 class="section-title">Booking Management</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Manage Bookings</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>User</th>
                                <th>Shuttle</th>
                                <th>Seat Number</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>B001</td>
                                <td>Dr Mahady Hasan</td>
                                <td>S001</td>
                                <td>12A</td>
                                <td><span class="badge bg-warning">Pending</span></td>
                                <td>
                                    <button class="btn btn-sm btn-success" title="Approve Booking"><i class="fas fa-check"></i></button>
                                    <button class="btn btn-sm btn-danger" title="Reject Booking"><i class="fas fa-times"></i></button>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                        <button class="btn orangebtn" data-bs-toggle="modal" data-bs-target="#placeNewBookingModal"><i class="fas fa-plus"></i> Place a New Booking</button>
                    </div>
                    <div id="placeNewBookingModal" class="modal fade" tabindex="-1" aria-labelledby="placeNewBookingModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header bg-gradient-primary text-white">
                                    <h5 class="modal-title" id="placeNewBookingModalLabel">Place New Booking</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="mb-3">
                                            <label for="bookingIdInput" class="form-label">Booking ID</label>
                                            <input type="text" class="form-control" id="bookingIdInput" placeholder="Enter Booking ID" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="userIdInput" class="form-label">User</label>
                                            <input type="text" class="form-control" id="userIdInput" placeholder="Enter User ID or Name" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="shuttleIdBookingInput" class="form-label">Shuttle ID</label>
                                            <input type="text" class="form-control" id="shuttleIdBookingInput" placeholder="Enter Shuttle ID" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="seatNumberInput" class="form-label">Seat Number</label>
                                            <input type="text" class="form-control" id="seatNumberInput" placeholder="Enter Seat Number" required>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100">Place Booking</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Manage Schedules Section -->
            <section id="manageSchedules" class="mb-5">
                <h2 class="section-title">Manage Schedules</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Shuttle Schedules</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Shuttle ID</th>
                                <th>Route</th>
                                <th>Departure Time</th>
                                <th>Arrival Time</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>S001</td>
                                <td>Airport Bus Stop → IUB Campus</td>
                                <td>08:00 AM</td>
                                <td>08:45 AM</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#editScheduleModal" title="Edit Schedule">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Delete Schedule">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            <!-- Additional schedule rows can be dynamically generated here -->
                            </tbody>
                        </table>
                        <button class="btn orangebtn" data-bs-toggle="modal" data-bs-target="#addScheduleModal">
                            <i class="fas fa-plus"></i> Add New Schedule
                        </button>
                    </div>
                </div>
            </section>

            <!-- Add Schedule Modal -->
            <div class="modal fade" id="addScheduleModal" tabindex="-1" aria-labelledby="addScheduleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="addScheduleModalLabel">Add Schedule</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="mb-3">
                                    <label for="shuttleIdInputSchedule" class="form-label">Shuttle ID</label>
                                    <input type="text" class="form-control" id="shuttleIdInputSchedule" placeholder="Enter Shuttle ID" required>
                                </div>
                                <div class="mb-3">
                                    <label for="routeInputSchedule" class="form-label">Route</label>
                                    <input type="text" class="form-control" id="routeInputSchedule" placeholder="Enter Route" required>
                                </div>
                                <div class="mb-3">
                                    <label for="departureTimeInput" class="form-label">Departure Time</label>
                                    <input type="time" class="form-control" id="departureTimeInput" required>
                                </div>
                                <div class="mb-3">
                                    <label for="arrivalTimeInput" class="form-label">Arrival Time</label>
                                    <input type="time" class="form-control" id="arrivalTimeInput" required>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Add Schedule</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Edit Schedule Modal -->
            <div class="modal fade" id="editScheduleModal" tabindex="-1" aria-labelledby="editScheduleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-gradient-primary text-white">
                            <h5 class="modal-title" id="editScheduleModalLabel">Edit Schedule</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="mb-3">
                                    <label for="editShuttleIdInput" class="form-label">Shuttle ID</label>
                                    <input type="text" class="form-control" id="editSchedule_ShuttleIdInput" placeholder="Enter Shuttle ID" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editRouteInput" class="form-label">Route</label>
                                    <input type="text" class="form-control" id="editSchedule_RouteInput" placeholder="Enter Route" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editDepartureTimeInput" class="form-label">Departure Time</label>
                                    <input type="time" class="form-control" id="editDepartureTimeInput" required>
                                </div>
                                <div class="mb-3">
                                    <label for="editArrivalTimeInput" class="form-label">Arrival Time</label>
                                    <input type="time" class="form-control" id="editArrivalTimeInput" required>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <section id="manageFeedback" class="py-4">
                <h2 class="section-title">Manage Feedback & Complaints</h2>

                <!-- Feedback Table -->
                <div class="table-responsive">

                    <div class="card-header">
                        <h5 class="card-title mb-0">All Feedback & Complaints</h5>
                    </div>
                    <table class="table table-striped">
                        <thead class="bg-gradient-primary text-white">
                        <tr>
                            <th>Date</th>
                            <th>User ID</th>
                            <th>Type</th>
                            <th>Message</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2024-11-14</td>
                            <td>U001</td>
                            <td>Complaint</td>
                            <td>Shuttle S002 arrived late.</td>
                            <td><span class="badge bg-warning">Pending</span></td>
                            <td>
                                <button class="btn btn-success btn-sm">Resolve</button>
                                <button class="btn btn-danger btn-sm">Delete</button>
                            </td>
                        </tr>
                        <tr>
                            <td>2024-11-10</td>
                            <td>U002</td>
                            <td>Feedback</td>
                            <td>Excellent service on Shuttle S001!</td>
                            <td><span class="badge bg-success">Resolved</span></td>
                            <td>
                                <button class="btn btn-danger btn-sm">Delete</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="mb-5">
                <h2 class="section-title">Reports</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Generate Reports</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="card report-card">
                                    <div class="card-body">
                                        <h5 class="card-title">User Activity</h5>
                                        <p class="card-text">View and analyze user engagement and activity within the shuttle system.</p>
                                        <a href="userActivityReport.html" class="btn btn-outline-primary"><i class="fas fa-chart-pie"></i> View Report</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card report-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Shuttle Performance</h5>
                                        <p class="card-text">Assess shuttle utilization, punctuality, and overall performance metrics.</p>
                                        <a href="shuttlePerformance.html" class="btn btn-outline-primary"><i class="fas fa-chart-bar"></i> View Report</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


        </div>
    </div>
</div>
<!-- Bootstrap JS and jQuery (Reused) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Existing Scripts -->
<script src="js/main.js"></script>
<script src="js/dashboard.js"></script>
<script>
    // dashboard.js
    $(document).ready(function() {
        const apiBaseUrl = 'http://localhost:3000'; // Update if different

        // Function to fetch and display users
        function loadUsers() {
            $.ajax({
                url: `${apiBaseUrl}/users`,
                method: 'GET',
                xhrFields: {
                    withCredentials: true
                },
                success: function(response) {
                    const users = response.users;
                    const tbody = $('#usersTable tbody');
                    tbody.empty(); // Clear existing rows

                    users.forEach(user => {
                        const statusBadge = getStatusBadge(user.account_status);
                        const row = `
                        <tr>
                            <td>${user.user_id}</td>
                            <td>${user.full_name}</td>
                            <td>${user.iub_email}</td>
                            <td>${user.designation}</td>
                            <td>${user.phone_number}</td>
                            <td>${statusBadge}</td>
                            <td>
                                <button class="btn btn-sm btn-primary edit-user-btn" data-user-id="${user.user_id}" title="Edit User">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger delete-user-btn" data-user-id="${user.user_id}" title="Delete User">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                        tbody.append(row);
                    });
                },
                error: function(xhr) {
                    if (xhr.status === 401 || xhr.status === 403) {
                        alert('Unauthorized access. Please log in as an admin.');
                        window.location.href = 'index.html'; // Redirect to login
                    } else {
                        alert('Failed to fetch users.');
                    }
                }
            });
        }

        // Function to get status badge HTML
        function getStatusBadge(status) {
            let badgeClass = 'bg-secondary';
            switch(status) {
                case 'Active':
                    badgeClass = 'bg-success';
                    break;
                case 'Inactive':
                    badgeClass = 'bg-secondary';
                    break;
                case 'Suspended':
                    badgeClass = 'bg-danger';
                    break;
                case 'Pending':
                    badgeClass = 'bg-warning';
                    break;
                default:
                    badgeClass = 'bg-primary';
            }
            return `<span class="badge ${badgeClass}">${status}</span>`;
        }

        // Load users on page load
        loadUsers();

        // Handle Add New User Form Submission
        $('#registerUserModal form').on('submit', function(e) {
            e.preventDefault();

            const userData = {
                user_id: $('#studentId').val().trim(),
                full_name: $('#fullName').val().trim(),
                iub_email: $('#email').val().trim(),
                password: $('#password').val(),
                designation: $('#designationSelect').val(), // Add a select input for designation
                phone_number: $('#phone').val().trim(),
                gender: $('#genderSelect').val(), // Add a select input for gender
                rfID_code: $('#nfcCode').val().trim() || null,
                account_status: 'Active' // Default status; can be modified as needed
            };

            // Validate required fields
            if (!userData.user_id || !userData.full_name || !userData.iub_email || !userData.password || !userData.designation || !userData.phone_number) {
                alert('Please fill in all required fields.');
                return;
            }

            // AJAX request to add a new user
            $.ajax({
                url: `${apiBaseUrl}/users`,
                method: 'POST',
                contentType: 'application/json',
                xhrFields: {
                    withCredentials: true
                },
                data: JSON.stringify(userData),
                success: function(response) {
                    alert(response.message);
                    $('#registerUserModal').modal('hide');
                    loadUsers(); // Refresh the user list
                    $('#registerUserModal form')[0].reset(); // Reset the form
                },
                error: function(xhr) {
                    const error = xhr.responseJSON?.error || 'Failed to add user.';
                    alert(error);
                }
            });
        });

        // Handle Edit User Button Click
        $(document).on('click', '.edit-user-btn', function() {
            const userId = $(this).data('user-id');

            // Fetch user details
            $.ajax({
                url: `${apiBaseUrl}/users/${userId}`,
                method: 'GET',
                xhrFields: {
                    withCredentials: true
                },
                success: function(response) {
                    const user = response.user;

                    // Populate the Edit User Modal fields
                    $('#editUserIdInput').val(user.user_id);
                    $('#editUserNameInput').val(user.full_name);
                    $('#editUserEmailInput').val(user.iub_email);
                    $('#editUserDesignationInput').val(user.designation);
                    $('#editUserPhoneInput').val(user.phone_number);
                    $('#editUserStatusInput').val(user.account_status);
                    $('#editUserGenderInput').val(user.gender);
                    $('#editUserRFIDInput').val(user.rfID_code || '');

                    // Show or hide NFC-related fields based on account status
                    if (user.account_status === 'Pending' || user.rfID_code === null) {
                        $('#editNfcAssign').prop('checked', true).trigger('change');
                    } else {
                        $('#editNfcAssigned').prop('checked', true).trigger('change');
                    }

                    // Show the modal
                    $('#editUserModal').modal('show');
                },
                error: function(xhr) {
                    const error = xhr.responseJSON?.error || 'Failed to fetch user details.';
                    alert(error);
                }
            });
        });

        // Handle Edit User Form Submission
        $('#editUserModal form').on('submit', function(e) {
            e.preventDefault();

            const userId = $('#editUserIdInput').val().trim();
            const updatedData = {
                full_name: $('#editUserNameInput').val().trim(),
                iub_email: $('#editUserEmailInput').val().trim(),
                designation: $('#editUserDesignationInput').val().trim(),
                phone_number: $('#editUserPhoneInput').val().trim(),
                account_status: $('#editUserStatusInput').val().trim(),
                gender: $('#editUserGenderInput').val().trim(),
                rfID_code: $('#editUserRFIDInput').val().trim() || null
            };

            const password = $('#editUserPasswordInput').val();
            if (password) {
                updatedData.password = password;
            }

            // Validate required fields
            if (!updatedData.full_name || !updatedData.iub_email || !updatedData.designation || !updatedData.phone_number || !updatedData.account_status) {
                alert('Please fill in all required fields.');
                return;
            }

            // AJAX request to update the user
            $.ajax({
                url: `${apiBaseUrl}/users/${userId}`,
                method: 'PUT',
                contentType: 'application/json',
                xhrFields: {
                    withCredentials: true
                },
                data: JSON.stringify(updatedData),
                success: function(response) {
                    alert(response.message);
                    $('#editUserModal').modal('hide');
                    loadUsers(); // Refresh the user list
                    $('#editUserModal form')[0].reset(); // Reset the form
                },
                error: function(xhr) {
                    const error = xhr.responseJSON?.error || 'Failed to update user.';
                    alert(error);
                }
            });
        });

        // Handle Delete User Button Click
        $(document).on('click', '.delete-user-btn', function() {
            const userId = $(this).data('user-id');

            if (confirm(`Are you sure you want to delete user ${userId}? This action cannot be undone.`)) {
                // AJAX request to delete the user
                $.ajax({
                    url: `${apiBaseUrl}/users/${userId}`,
                    method: 'DELETE',
                    xhrFields: {
                        withCredentials: true
                    },
                    success: function(response) {
                        alert(response.message);
                        loadUsers(); // Refresh the user list
                    },
                    error: function(xhr) {
                        const error = xhr.responseJSON?.error || 'Failed to delete user.';
                        alert(error);
                    }
                });
            }
        });

        // Helper function to initialize Edit User Modal's NFC Options
        function initializeEditUserModal() {
            $('input[name="nfcOptionEdit"]').on('change', function () {
                if ($('#editNfcAssign').is(':checked')) {
                    $('#editNfcGif').show(); // Show the NFC GIF
                    $('#editNfcCodeInput').show(); // Show the NFC code input
                } else {
                    $('#editNfcGif').hide(); // Hide the NFC GIF
                    $('#editNfcCodeInput').hide(); // Hide the NFC code input
                }
            });
        }

        // Initialize NFC options in Edit User Modal
        initializeEditUserModal();

        // Function to reset Add User Modal upon closing
        $('#registerUserModal').on('hidden.bs.modal', function () {
            $(this).find('form')[0].reset();
            $('#nfcGif').show();
            $('#nfcCodeInput').hide();
        });

        // Function to reset Edit User Modal upon closing
        $('#editUserModal').on('hidden.bs.modal', function () {
            $(this).find('form')[0].reset();
            $('#editNfcGif').hide();
            $('#editNfcCodeInput').hide();
        });

        // Additional functions and event handlers can be added here as needed
    });

</script>

</body>
</html>